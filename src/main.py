import os
import tfidf

def tf_idf(directory,ext):
	table = tfidf.tfidf()
	for root, dirs, files in os.walk(directory):
		for file in files:
			if file.endswith(ext):
				filename = root+file
				try:
					print file
					content = open(filename, 'rb').read()
					opcodeList	=	content.split(",")
					table.addDocument(file, opcodeList)
				except Exception as err:
					print str(err)
	print table.similarities (["nop"])
#Running ...
#table = tfidf.tfidf()
#table.addDocument("foo", ["alpha", "bravo", "charlie", "delta", "echo", "foxtrot", "golf", "hotel"])
#table.addDocument("bar", ["alpha", "bravo", "charlie", "india", "juliet", "kilo"])
#table.addDocument("baz", ["kilo", "lima", "mike", "november"])

#print table.similarities (["alpha", "bravo", "charlie"]) # => [['foo', 0.6875], ['bar', 0.75], ['baz', 0.0]]

tf_idf('C:\\Users\\asus\\Desktop\\workspace\\test\\all_viruses_exe\\type1_2_3_4_5_6_9\\',".distorm")